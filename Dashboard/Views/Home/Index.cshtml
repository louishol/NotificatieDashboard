@model Lib.ViewModels.HomeViewModel
@{
    ViewBag.Title = "Home Page";
}
@Scripts.Render("~/bundles/jquery")
<div class="flex-container">

    <div class="flex-item">

        <a href="/Customer/Create" class="list-group-item active"><span style="float: right"><div class="glyphicon glyphicon-plus"></div></span> Klanten</a>

        @foreach (var item in Model.Customers)
        {
            @Html.ActionLink((String)item.CompanyName, "Details", "Customer", new { id = item.customerId }, new { @class = "list-group-item" });

        }
    </div>
    <div class="flex-item">
        <a href="/Application/Create" class="list-group-item active"><span style="float: right">
            <p id="newapplication" class="glyphicon glyphicon-plus hover"></p>
         </span> Applicaties
        </a>
        @foreach (var item in Model.Applications)
        {   
            @*@Html.ActionLink((String)item.name, "Details", "Application", new { id = item.applicationId}, new { @class = "list-group-item" });*@
            <a href="/Application/Details/@item.applicationId" class="list-group-item">@item.name <span class="badge">V @item.version</span></a>

        }
    </div>
    <div class="flex-item">
        <a class="list-group-item active"><span class="badge"></span>Verdeling besturingssystemen  </a>
        <div id="piechart"></div>
    </div>
 
    <div class="flex-item">
        <a href="#" class="list-group-item" style="background-color:lightgreen">
            Onlangs toegevoegde apparaten
        </a>
        @foreach (var item in Model.Devices)
        {
            <a href="#" class="list-group-item">@item.operatingSystemVersion - @item.uniqueId <span class="badge">@item.tblApplications.name</span></a>
        }
        
    </div>
    <div class="flex-item">
        <a href="#" class="list-group-item" style="background-color:orange">
            Onlangs toegevoegde crash reports
        </a>
        @foreach (var item in Model.CrashReports)

        {
          <a href="#" class="list-group-item">@item.report</a>
        }
     
    </div>
    <div class="flex-item">
        <a href="#" class="list-group-item active">
            Populaire Applicaties :
        </a>
        @foreach (var item in Model.Popular)
        {
            <a href="../Application/Details/@item.applicationId" class="list-group-item"><span class="badge">@item.devices</span>@item.applicationName
</a>
        }
    </div>
</div>

<script type="text/javascript">

    google.charts.load('current', { 'packages': ['corechart'] });
    var appData = [['OS', 'Counter']];

    function addDataToArray(OS, counter) {
        appData.push([OS, counter]);
    }
    @foreach (var app in Model.OSStatistics)
    {
       @:addDataToArray('@app.name', @app.counter);
    }
    google.charts.setOnLoadCallback(drawChart);
    function drawChart() {
        var data = google.visualization.arrayToDataTable(appData);
        var options = {};
        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
    }
</script>